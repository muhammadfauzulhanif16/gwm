import{W as P,j as a,B as h,G as S,h as d}from"./app-GN6kLJRO.js";import{c as T,A as x,S as m,F as u}from"./AppLayout-Gf3vqqpC.js";import{P as A,T as g}from"./PageHeader-OuuI5Bp2.js";import{A as c}from"./Accordion-iE_TurGq.js";import{C as N}from"./Center-pRLDIHF5.js";import{I as f,a as j}from"./IconTrash-WrNuQE2f.js";import{T as y}from"./TextInput-v4RmyZAk.js";import{I as B}from"./IconCornerDownLeft-2Qks2vrS.js";import{K as F}from"./Kbd-Cj2wMUF5.js";import"./AccordionChevron-gv5R7zeZ.js";const W=({title:p,description:b,prayers:$,auth:v})=>{const e=P({prayers:[{name:"",choices:[{name:""}]}]}),k=()=>{e.setData("prayers",[...e.data.prayers,{name:"",choices:[{name:""}]}])},C=r=>{e.setData("prayers",e.data.prayers.filter((s,t)=>t!==r))},w=r=>{const s=[...e.data.prayers];s[r].choices=[...s[r].choices,{name:""}],e.setData("prayers",s)},E=(r,s)=>{const t=[...e.data.prayers];t[r].choices=t[r].choices.filter((o,i)=>i!==s),e.setData("prayers",t)};return a.jsx(T,{title:p,auth:v,children:a.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:40},onSubmit:r=>{r.preventDefault(),e.post(route("prayers.store"))},children:[a.jsx(A,{title:p,description:b}),a.jsx(h,{bg:"gray.0",p:20,style:{borderRadius:8},children:a.jsx(c,{defaultValue:"prayer-0",variant:"contained",radius:8,styles:{control:{padding:0},label:{padding:0},content:{padding:"0 20px 20px 20px"}},children:e.data.prayers.map((r,s)=>a.jsxs(c.Item,{value:`prayer-${s}`,children:[a.jsxs(N,{px:20,py:8,children:[a.jsx(c.Control,{pr:20,c:"gray.8",children:a.jsxs(g,{fw:500,children:[r.name," (Ibadah ",s+1,")"]})}),a.jsx(x,{size:40,radius:8,variant:"light",color:"red",onClick:()=>C(s),disabled:e.data.prayers.length===1,children:a.jsx(f,{})})]}),a.jsx(c.Panel,{children:a.jsxs(m,{gap:20,children:[a.jsx(y,{label:"Nama",autoFocus:!0,radius:8,variant:"filled",placeholder:`Masukkan nama ibadah (${s+1})`,styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:t=>{const o=t.target.value;let i="";o?$.some(n=>new RegExp(`^${o}$`,"i").test(n.name))&&(i="Nama ibadah sudah ada"):i="Nama ibadah tidak boleh kosong",e.data.prayers[s].name=o,e.setData("prayers",e.data.prayers),i?e.setError(`prayers.${s}.name`,i):e.clearErrors(`prayers.${s}.name`)},error:e.errors[`prayers.${s}.name`]}),a.jsxs(m,{gap:40,children:[a.jsxs(h,{children:[a.jsx(g,{c:"gray.7",fz:14,mb:8,fw:500,children:"Opsi"}),a.jsx(m,{gap:12,children:r.choices.map((t,o)=>a.jsxs(S,{gap:8,mb:e.hasErrors&&20,children:[a.jsx(y,{autoFocus:!0,radius:8,variant:"filled",placeholder:`Masukkan opsi (${o+1})`,styles:{input:{padding:20,height:40}},style:{flexGrow:1},onChange:i=>{const n=i.target.value;let l="";n?r.choices.some(D=>new RegExp(`^${n}$`,"i").test(D.name))&&(l="Nama opsi sudah ada"):l="Nama opsi tidak boleh kosong",e.data.prayers[s].choices[o].name=n,e.setData("prayers",e.data.prayers),l?e.setError(`prayers.${s}.choices.${o}.name`,l):e.clearErrors(`prayers.${s}.choices.${o}.name`)},error:e.errors[`prayers.${s}.choices.${o}.name`]}),a.jsx(x,{size:40,radius:8,variant:"light",color:"red",onClick:()=>E(s,o),disabled:r.choices.length===1,children:a.jsx(f,{})})]},o))})]}),a.jsx(u,{justify:"flex-end",direction:{base:"column",xs:"row"},gap:20,children:a.jsx(d,{h:40,px:20,radius:8,variant:"outline",leftSection:a.jsx(j,{}),onClick:()=>w(s),disabled:e.processing,children:"Tambah Opsi Lainnya"})})]})]})})]},s))})}),a.jsxs(u,{justify:"flex-end",direction:{base:"column",xs:"row"},gap:8,children:[a.jsx(d,{h:40,px:20,variant:"outline",leftSection:a.jsx(j,{}),onClick:k,disabled:e.processing,children:"Tambah Ibadah Lainnya"}),a.jsx(d,{disabled:e.hasErrors||e.data.prayers.some(r=>!r.name||r.choices&&r.choices.some(s=>!s.name)),loading:e.processing,loaderProps:{type:"dots"},type:"submit",h:40,px:20,leftSection:a.jsx(B,{}),rightSection:a.jsx(F,{children:"Enter"}),children:"Simpan"})]})]})})};export{W as default};
