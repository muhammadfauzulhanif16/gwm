import{W as _,r as B,j as o,B as D,h as x}from"./app-GN6kLJRO.js";import{c as T,A as R,S as $,e as k,F as w}from"./AppLayout-Gf3vqqpC.js";import{P as S,T as A}from"./PageHeader-OuuI5Bp2.js";import{A as m}from"./Accordion-iE_TurGq.js";import{C as K}from"./Center-pRLDIHF5.js";import{I as O,a as J}from"./IconTrash-WrNuQE2f.js";import{F as p,N as d,T as N}from"./NumberInput-ooBEDviJ.js";import{T as c}from"./TextInput-v4RmyZAk.js";import{S as f}from"./Select-UtJL78W8.js";import{G as n}from"./react-number-format.es-vD2MZIg7.js";import{M as u}from"./MultiSelect-GIHIZ9yY.js";import{I as W}from"./IconCornerDownLeft-2Qks2vrS.js";import{K as H}from"./Kbd-Cj2wMUF5.js";import"./AccordionChevron-gv5R7zeZ.js";const oe=({title:j,description:C,professions:v,consumptions:g,prayers:y,socialMedias:F,auth:M})=>{const e=_({citizens:[{personal:{name:"",gender:"",age:"",phone_number:"",neighborhood:"",hamlet:"",urban_village:"",sub_district:"",latitude:"",longitude:""},job:{profession_id:"",income:"",dependents:"",workplace:"",field:"",scale:"",description:""},consumptions:[],prayers:[],social_medias:[]}]});B.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{e.data.citizens.forEach(a=>{a.personal.latitude=t.coords.latitude,a.personal.longitude=t.coords.longitude})})},[e]);const h=(t,a,r)=>{if(!t||t.length===0){e.setError(`citizens.${a}.consumptions.${r}`,"Konsumsi tidak boleh kosong");return}const s=[...new Set(t)],i=e.data.citizens[a].consumptions.map(l=>l.value),b=s.filter(l=>!i.includes(l)).map(l=>({time_period:r,value:l}));e.data.citizens[a].consumptions.push(...b),e.setData("citizens",e.data.citizens),e.clearErrors(`citizens.${a}.consumptions.${r}`)},E=(t,a,r)=>{let s="";(!t||t.length===0)&&(s="Ibadah tidak boleh kosong");const i=e.data.citizens[a].prayers.find(b=>b.prayer_id===r);i?i.choice_id=t:e.data.citizens[a].prayers.push({prayer_id:r,choice_id:t}),e.setData("citizens",e.data.citizens),s?e.setError(`citizens.${a}.prayers.${r}`,s):e.clearErrors(`citizens.${a}.prayers.${r}`)},z=()=>{e.setData("citizens",[...e.data.citizens,{personal:{name:"",gender:"",age:"",phone_number:"",neighborhood:"",hamlet:"",urban_village:"",sub_district:"",latitude:"",longitude:""},job:{profession:"",income:"",dependents:"",workplace:"",field:"",scale:"",description:""},consumptions:[],prayers:[],social_medias:[]}])},P=t=>{e.setData("citizens",e.data.citizens.filter((a,r)=>r!==t))};return o.jsx(T,{title:j,auth:M,children:o.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:40},onSubmit:t=>{t.preventDefault(),e.post(route("citizens.store"))},children:[o.jsx(S,{title:j,description:C}),o.jsx(D,{bg:"gray.0",p:20,style:{borderRadius:8},children:o.jsx(m,{defaultValue:"prayer-0",variant:"contained",radius:8,styles:{control:{padding:0},label:{padding:0},content:{padding:"0 20px 20px 20px"}},children:e.data.citizens.map((t,a)=>o.jsxs(m.Item,{value:`citizen-${a}`,children:[o.jsxs(K,{px:20,py:8,children:[o.jsx(m.Control,{pr:20,c:"gray.8",children:o.jsxs(A,{fw:500,children:[t.personal.name," (Warga ",a+1,")"]})}),o.jsx(R,{size:40,variant:"light",color:"red",onClick:()=>P(a),disabled:e.data.citizens.length===1,children:o.jsx(O,{})})]}),o.jsx(m.Panel,{children:o.jsxs($,{gap:20,children:[o.jsx(p,{legend:"Pribadi",styles:{root:{padding:20,margin:0,backgroundColor:"#F8F9FA"}},children:o.jsxs($,{gap:20,children:[o.jsxs(k,{cols:{base:1,xs:2},gap:20,children:[o.jsx(c,{label:"Nama",autoFocus:!0,radius:8,variant:"filled",placeholder:"Masukkan nama",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{const s=r.target.value;let i="";s||(i="Nama tidak boleh kosong"),e.data.citizens[a].personal.name=s,e.setData("citizens",e.data.citizens),i?e.setError(`citizens.${a}.personal.name`,i):e.clearErrors(`citizens.${a}.personal.name`)},error:e.errors[`citizens.${a}.personal.name`]}),o.jsx(f,{label:"Jenis Kelamin",autoFocus:!0,checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada jenis kelamin",searchable:!0,clearable:!0,variant:"filled",placeholder:"Pilih jenis kelamin",data:["Laki-laki","Perempuan"],styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:r=>{let s="";r||(s="Jenis kelamin tidak boleh kosong"),e.data.citizens[a].personal.gender=r,e.setData("citizens",e.data.citizens),s?e.setError(`citizens.${a}.personal.gender`,s):e.clearErrors(`citizens.${a}.personal.gender`)},error:e.errors[`citizens.${a}.personal.gender`]}),o.jsx(d,{label:"Usia",autoFocus:!0,radius:8,hideControls:!0,clampBehavior:"strict",min:0,variant:"filled",placeholder:"Masukkan usia",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{let s="";r||(s="Usia tidak boleh kosong"),e.data.citizens[a].personal.age=r,e.setData("citizens",e.data.citizens),s?e.setError(`citizens.${a}.personal.age`,s):e.clearErrors(`citizens.${a}.personal.age`)},error:e.errors[`citizens.${a}.personal.age`]}),o.jsx(d,{label:"Nomor Telepon",clampBehavior:"strict",hideControls:!0,min:0,autoFocus:!0,radius:8,variant:"filled",placeholder:"Masukkan nomor telepon",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{let s="";r||(s="Nomor telepon tidak boleh kosong"),e.data.citizens[a].personal.phone_number=r,e.setData("citizens",e.data.citizens),s?e.setError(`citizens.${a}.personal.phone_number`,s):e.clearErrors(`citizens.${a}.personal.phone_number`)},error:e.errors[`citizens.${a}.personal.phone_number`]})]}),o.jsxs(k,{cols:{base:1,xs:2},gap:20,children:[o.jsx(d,{label:"RT",autoFocus:!0,radius:8,hideControls:!0,clampBehavior:"strict",min:0,variant:"filled",placeholder:"Masukkan RT",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{let s="";r||(s="RT tidak boleh kosong"),e.data.citizens[a].personal.neighborhood=r,e.setData("citizens",e.data.citizens),s?e.setError(`citizens.${a}.personal.neighborhood`,s):e.clearErrors(`citizens.${a}.personal.neighborhood`)},error:e.errors[`citizens.${a}.personal.neighborhood`]}),o.jsx(d,{label:"RW",clampBehavior:"strict",hideControls:!0,min:0,autoFocus:!0,radius:8,variant:"filled",placeholder:"Masukkan RW",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{let s="";r||(s="RW tidak boleh kosong"),e.data.citizens[a].personal.hamlet=r,e.setData("citizens",e.data.citizens),s?e.setError(`citizens.${a}.personal.hamlet`,s):e.clearErrors(`citizens.${a}.personal.hamlet`)},error:e.errors[`citizens.${a}.personal.hamlet`]}),o.jsx(c,{label:"Desa/Kelurahan",autoFocus:!0,radius:8,variant:"filled",placeholder:"Masukkan desa/kelurahan",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{const s=r.target.value;let i="";s||(i="Desa/kelurahan tidak boleh kosong"),e.data.citizens[a].personal.urban_village=s,e.setData("citizens",e.data.citizens),i?e.setError(`citizens.${a}.personal.urban_village`,i):e.clearErrors(`citizens.${a}.personal.urban_village`)},error:e.errors[`citizens.${a}.personal.urban_village`]}),o.jsx(c,{label:"Kecamatan",autoFocus:!0,radius:8,variant:"filled",placeholder:"Masukkan kecamatan",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{const s=r.target.value;let i="";s||(i="Kecamatan tidak boleh kosong"),e.data.citizens[a].personal.sub_district=s,e.setData("citizens",e.data.citizens),i?e.setError(`citizens.${a}.personal.sub_district`,i):e.clearErrors(`citizens.${a}.personal.sub_district`)},error:e.errors[`citizens.${a}.personal.sub_district`]})]})]})}),o.jsx(p,{legend:"Pekerjaan",styles:{root:{padding:20,margin:0,backgroundColor:"#F8F9FA"}},children:o.jsxs(n,{grow:!0,gutter:20,children:[o.jsx(n.Col,{span:{base:12,xs:6},children:o.jsx(f,{label:"Profesi",autoFocus:!0,checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada profesi",searchable:!0,clearable:!0,variant:"filled",placeholder:"Pilih profesi",data:v.map(({id:r,name:s})=>({value:r,label:s})),styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:r=>{let s="";r||(s="Profesi tidak boleh kosong"),e.data.citizens[a].job.profession_id=r,e.setData("citizens",e.data.citizens),s?e.setError(`citizens.${a}.job.profession_id`,s):e.clearErrors(`citizens.${a}.job.profession_id`)},error:e.errors[`citizens.${a}.job.profession_id`]})}),o.jsx(n.Col,{span:{base:12,xs:6},children:o.jsx(d,{label:"Jumlah Penghasilan",autoFocus:!0,radius:8,hideControls:!0,clampBehavior:"strict",min:0,variant:"filled",placeholder:"Masukkan jumlah penghasilan",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{let s="";r||(s="Jumlah penghasilan tidak boleh kosong"),e.data.citizens[a].job.income=r,e.setData("citizens",e.data.citizens),s?e.setError(`citizens.${a}.job.income`,s):e.clearErrors(`citizens.${a}.job.income`)},error:e.errors[`citizens.${a}.job.income`]})}),o.jsx(n.Col,{span:{base:12,xs:6},children:o.jsx(d,{label:"Jumlah Tanggungan",autoFocus:!0,radius:8,hideControls:!0,clampBehavior:"strict",min:0,variant:"filled",placeholder:"Masukkan jumlah tanggugan",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{let s="";r||(s="Jumlah tanggungan tidak boleh kosong"),e.data.citizens[a].job.dependents=r,e.setData("citizens",e.data.citizens),s?e.setError(`citizens.${a}.job.dependents`,s):e.clearErrors(`citizens.${a}.job.dependents`)},error:e.errors[`citizens.${a}.job.dependents`]})}),o.jsx(n.Col,{span:{base:12,xs:6},children:o.jsx(c,{label:"Tempat Kerja",autoFocus:!0,radius:8,variant:"filled",placeholder:"Masukkan tempat kerja",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{const s=r.target.value;let i="";s||(i="Tempat kerja tidak boleh kosong"),e.data.citizens[a].job.workplace=s,e.setData("citizens",e.data.citizens),i?e.setError(`citizens.${a}.job.workplace`,i):e.clearErrors(`citizens.${a}.job.workplace`)},error:e.errors[`citizens.${a}.job.workplace`]})}),o.jsx(n.Col,{span:{base:12,xs:6},children:o.jsx(c,{label:"Bidang Pekerjaan",autoFocus:!0,radius:8,variant:"filled",placeholder:"Masukkan bidang pekerjaan",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{const s=r.target.value;let i="";s||(i="Bidang pekerjaan tidak boleh kosong"),e.data.citizens[a].job.field=s,e.setData("citizens",e.data.citizens),i?e.setError(`citizens.${a}.job.field`,i):e.clearErrors(`citizens.${a}.job.field`)},error:e.errors[`citizens.${a}.job.field`]})}),o.jsx(n.Col,{span:{base:12,xs:6},children:o.jsx(c,{label:"Skala Pekerjaan",autoFocus:!0,radius:8,variant:"filled",placeholder:"Masukkan skala pekerjaan",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{const s=r.target.value;let i="";s||(i="Skala pekerjaan tidak boleh kosong"),e.data.citizens[a].job.scale=s,e.setData("citizens",e.data.citizens),i?e.setError(`citizens.${a}.job.scale`,i):e.clearErrors(`citizens.${a}.job.scale`)},error:e.errors[`citizens.${a}.job.scale`]})}),o.jsx(n.Col,{span:12,children:o.jsx(N,{label:"Deskripsi Pekerjaan",autoFocus:!0,autosize:!0,resize:"vertical",radius:8,variant:"filled",placeholder:"Masukkan deskripsi pekerjaan",styles:{input:{padding:"8px 20px",height:40},label:{marginBottom:8,color:"#495057"}},onChange:r=>{const s=r.target.value;let i="";s||(i="Deskripsi pekerjaan tidak boleh kosong"),e.data.citizens[a].job.description=s,e.setData("citizens",e.data.citizens),i?e.setError(`citizens.${a}.job.description`,i):e.clearErrors(`citizens.${a}.job.description`)},error:e.errors[`citizens.${a}.job.description`]})})]})}),o.jsx(p,{legend:"Konsumsi",styles:{root:{padding:20,margin:0,backgroundColor:"#F8F9FA"}},children:o.jsxs(k,{gap:20,cols:{base:1,xs:2},children:[o.jsx(u,{hidePickedOptions:!0,label:"Harian",autoFocus:!0,checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada konsumsi",searchable:!0,clearable:!0,variant:"filled",placeholder:"Pilih konsumsi",data:g.map(({name:r})=>r).filter(r=>!e.data.citizens[a].consumptions.some(s=>s.value===r)),styles:{input:{display:"flex",alignItems:"center",padding:"8px 20px"},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:r=>h(r,a,"Harian"),error:e.errors[`citizens.${a}.consumptions.Harian`]}),o.jsx(u,{label:"Mingguan",autoFocus:!0,hidePickedOptions:!0,checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada konsumsi",searchable:!0,clearable:!0,variant:"filled",placeholder:"Pilih konsumsi",data:g.map(({name:r})=>r).filter(r=>!e.data.citizens[a].consumptions.some(s=>s.value===r)),styles:{input:{display:"flex",alignItems:"center",padding:"8px 20px"},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:r=>h(r,a,"Pekanan"),error:e.errors[`citizens.${a}.consumptions.Pekanan`]}),o.jsx(u,{label:"Bulanan",autoFocus:!0,hidePickedOptions:!0,checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada konsumsi",searchable:!0,clearable:!0,variant:"filled",placeholder:"Pilih konsumsi",data:g.map(({name:r})=>r).filter(r=>!e.data.citizens[a].consumptions.some(s=>s.value===r)),styles:{input:{display:"flex",alignItems:"center",padding:"8px 20px"},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:r=>h(r,a,"Bulanan"),error:e.errors[`citizens.${a}.consumptions.Bulanan`]}),o.jsx(u,{label:"Tahunan",autoFocus:!0,hidePickedOptions:!0,checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada konsumsi",searchable:!0,clearable:!0,variant:"filled",placeholder:"Pilih konsumsi",data:g.map(({name:r})=>r).filter(r=>!e.data.citizens[a].consumptions.some(s=>s.value===r)),styles:{input:{display:"flex",alignItems:"center",padding:"8px 20px"},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:r=>h(r,a,"Tahunan"),error:e.errors[`citizens.${a}.consumptions.Tahunan`]})]})}),o.jsx(p,{legend:"Ibadah",styles:{root:{padding:20,margin:0,backgroundColor:"#F8F9FA"}},children:o.jsx(n,{grow:!0,children:y.map(r=>o.jsx(n.Col,{span:{base:12,xs:6},children:o.jsx(f,{label:r.name,autoFocus:!0,checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada opsi",searchable:!0,clearable:!0,variant:"filled",placeholder:"Pilih opsi",data:r.choices.map(({id:s,name:i})=>({value:s,label:i})),styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:s=>E(s,a,r.id),error:e.errors[`citizens.${a}.prayers.${r.id}`]})},r.id))})}),o.jsx(p,{legend:"Media Sosial",styles:{root:{padding:20,margin:0,backgroundColor:"#F8F9FA"}},children:o.jsx(u,{label:"Aplikasi",autoFocus:!0,hidePickedOptions:!0,checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada aplikasi",searchable:!0,clearable:!0,variant:"filled",placeholder:"Pilih aplikasi",data:F.map(({id:r,name:s})=>({value:r,label:s})),styles:{input:{display:"flex",alignItems:"center",padding:"8px 20px"},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:r=>{let s="";(!r||r.length===0)&&(s="Aplikasi tidak boleh kosong"),e.data.citizens[a].social_medias=r,e.setData("citizens",e.data.citizens),s?e.setError(`citizens.${a}.social_medias`,s):e.clearErrors(`citizens.${a}.social_medias`)},error:e.errors[`citizens.${a}.social_medias`]})})]})})]},a))})}),o.jsxs(w,{justify:"flex-end",direction:{base:"column",xs:"row"},gap:8,children:[o.jsx(x,{h:40,px:20,variant:"outline",leftSection:o.jsx(J,{}),onClick:z,disabled:e.processing,children:"Tambah Warga Lainnya"}),o.jsx(x,{disabled:e.hasErrors||e.data.citizens.some(t=>Object.values(t.personal).some(a=>!a)||Object.values(t.job).some(a=>!a)||t.consumptions.length===0||t.prayers.length===0||t.social_medias.length===0),loading:e.processing,loaderProps:{type:"dots"},type:"submit",h:40,px:20,ius:8,leftSection:o.jsx(W,{}),rightSection:o.jsx(H,{children:"Enter"}),children:"Simpan"})]})]})})};export{oe as default};
