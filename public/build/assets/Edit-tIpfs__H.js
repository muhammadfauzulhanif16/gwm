import{W as B,r as _,j as o,h as D}from"./app-GN6kLJRO.js";import{c as R,S as f,e as m,F as T}from"./AppLayout-Gf3vqqpC.js";import{P as w}from"./PageHeader-OuuI5Bp2.js";import{F as p,N as i,T as I}from"./NumberInput-ooBEDviJ.js";import{T as d}from"./TextInput-v4RmyZAk.js";import{S as b}from"./Select-UtJL78W8.js";import{G as l}from"./react-number-format.es-vD2MZIg7.js";import{M as u}from"./MultiSelect-GIHIZ9yY.js";import{I as S}from"./IconCornerDownLeft-2Qks2vrS.js";import{K}from"./Kbd-Cj2wMUF5.js";const U=({title:k,description:x,professions:v,consumptions:c,prayers:C,socialMedias:y,auth:E,citizen:n})=>{console.log(n);const a=B({personal:{...n},job:{profession:n.job.name,...n},consumptions:n.consumptions||[],prayers:n.prayers||[],social_medias:n.social_medias||[]});_.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(({coords:{latitude:e,longitude:r}})=>{a.setData("personal.latitude",e),a.setData("personal.longitude",r)})},[]);const g=(e,r)=>{if(!e||e.length===0){a.setError(`consumptions.${r}`,"Konsumsi tidak boleh kosong");return}const s=[...new Set(e)],h=a.data.consumptions.filter(t=>t.time_period!==r||s.includes(t.value)),M=s.filter(t=>!h.some(j=>j.time_period===r&&j.value===t)).map(t=>({time_period:r,value:t})),P=[...h,...M];a.setData("consumptions",P),a.clearErrors(`consumptions.${r}`)},F=(e,r)=>{if(!e||e.length===0){a.setError(`prayers.${r}`,"Ibadah tidak boleh kosong");return}let s=a.data.prayers.find(h=>h.name===r);s||(s={name:r,choice:""},a.data.prayers.push(s)),s.choice!==e&&(s.choice=e,a.setData("prayers",a.data.prayers)),a.clearErrors(`prayers.${r}`)};return o.jsx(R,{title:k,auth:E,children:o.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:40},onSubmit:e=>{e.preventDefault(),a.put(route("citizens.update",n.id))},children:[o.jsx(w,{title:k,description:x}),o.jsxs(f,{gap:20,bg:"gray.0",p:20,style:{borderRadius:8},children:[o.jsx(p,{legend:"Pribadi",styles:{root:{padding:20,margin:0,backgroundColor:"#F8F9FA"}},children:o.jsxs(f,{gap:20,children:[o.jsxs(m,{cols:{base:1,xs:2},gap:20,children:[o.jsx(d,{label:"Nama",autoFocus:!0,radius:8,variant:"filled",placeholder:"Masukkan nama",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},value:a.data.personal.name,onChange:e=>{const r=e.target.value;let s="";r||(s="Nama tidak boleh kosong"),a.data.personal.name=r,a.setData("personal",a.data.personal),s?a.setError("personal.name",s):a.clearErrors("personal.name")},error:a.errors["personal.name"]}),o.jsx(b,{label:"Jenis Kelamin",checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada jenis kelamin",searchable:!0,clearable:!0,variant:"filled",placeholder:"Pilih jenis kelamin",data:["Laki-laki","Perempuan"],value:a.data.personal.gender,styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:e=>{let r="";e||(r="Jenis kelamin tidak boleh kosong"),a.data.personal.gender=e,a.setData("personal",a.data.personal),r?a.setError("personal.gender",r):a.clearErrors("personal.gender")},error:a.errors["personal.gender"]}),o.jsx(i,{label:"Usia",autoFocus:!0,radius:8,hideControls:!0,clampBehavior:"strict",min:0,variant:"filled",value:a.data.personal.age,placeholder:"Masukkan usia",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:e=>{let r="";e||(r="Usia tidak boleh kosong"),a.data.personal.age=e,a.setData("personal",a.data.personal),r?a.setError("personal.age",r):a.clearErrors("personal.age")},error:a.errors["personal.age"]}),o.jsx(i,{label:"Nomor Telepon",clampBehavior:"strict",hideControls:!0,min:0,autoFocus:!0,value:a.data.personal.phone_number,radius:8,variant:"filled",placeholder:"Masukkan nomor telepon",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:e=>{let r="";e||(r="Nomor telepon tidak boleh kosong"),a.data.personal.phone_number=e,a.setData("personal",a.data.personal),r?a.setError("personal.phone_number",r):a.clearErrors("personal.phone_number")},error:a.errors["personal.phone_number"]})]}),o.jsxs(m,{cols:{base:1,xs:2},gap:20,children:[o.jsx(i,{label:"RT",autoFocus:!0,radius:8,hideControls:!0,value:a.data.personal.neighborhood,clampBehavior:"strict",min:0,variant:"filled",placeholder:"Masukkan RT",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:e=>{let r="";e||(r="RT tidak boleh kosong"),a.data.personal.neighborhood=e,a.setData("personal",a.data.personal),r?a.setError("personal.neighborhood",r):a.clearErrors("personal.neighborhood")},error:a.errors["personal.neighborhood"]}),o.jsx(i,{label:"RW",clampBehavior:"strict",hideControls:!0,min:0,autoFocus:!0,value:a.data.personal.hamlet,radius:8,variant:"filled",placeholder:"Masukkan RW",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:e=>{let r="";e||(r="RW tidak boleh kosong"),a.data.personal.hamlet=e,a.setData("personal",a.data.personal),r?a.setError("personal.hamlet",r):a.clearErrors("personal.hamlet")},error:a.errors["personal.hamlet"]}),o.jsx(d,{label:"Desa/Kelurahan",autoFocus:!0,radius:8,variant:"filled",placeholder:"Masukkan desa/kelurahan",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},value:a.data.personal.urban_village,onChange:e=>{const r=e.target.value;let s="";r||(s="Desa/kelurahan tidak boleh kosong"),a.data.personal.urban_village=r,a.setData("personal",a.data.personal),s?a.setError("personal.urban_village",s):a.clearErrors("personal.urban_village")},error:a.errors["personal.urban_village"]}),o.jsx(d,{label:"Kecamatan",autoFocus:!0,radius:8,variant:"filled",value:a.data.personal.sub_district,placeholder:"Masukkan kecamatan",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:e=>{const r=e.target.value;let s="";r||(s="Kecamatan tidak boleh kosong"),a.data.personal.sub_district=r,a.setData("personal",a.data.personal),s?a.setError("personal.sub_district",s):a.clearErrors("personal.sub_district")},error:a.errors["personal.sub_district"]})]})]})}),o.jsx(p,{legend:"Pekerjaan",styles:{root:{padding:20,margin:0,backgroundColor:"#F8F9FA"}},children:o.jsxs(l,{grow:!0,gutter:20,children:[o.jsx(l.Col,{span:{base:12,xs:6},children:o.jsx(b,{label:"Profesi",checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada profesi",searchable:!0,clearable:!0,value:a.data.job.profession,data:v.map(({name:e})=>e),variant:"filled",placeholder:"Pilih profesi",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:e=>{let r="";e||(r="Profesi tidak boleh kosong"),a.data.job.profession=e,a.setData("job",a.data.job),r?a.setError("job.profession",r):a.clearErrors("job.profession")},error:a.errors["job.profession"]})}),o.jsx(l.Col,{span:{base:12,xs:6},children:o.jsx(i,{label:"Jumlah Penghasilan",autoFocus:!0,radius:8,hideControls:!0,value:a.data.job.income,clampBehavior:"strict",min:0,variant:"filled",placeholder:"Masukkan jumlah penghasilan",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:e=>{let r="";e||(r="Jumlah penghasilan tidak boleh kosong"),a.data.job.income=e,a.setData("job",a.data.job),r?a.setError("job.income",r):a.clearErrors("job.income")},error:a.errors["job.income"]})}),o.jsx(l.Col,{span:{base:12,xs:6},children:o.jsx(i,{label:"Jumlah Tanggungan",autoFocus:!0,radius:8,hideControls:!0,clampBehavior:"strict",min:0,value:a.data.job.dependents,variant:"filled",placeholder:"Masukkan jumlah tanggugan",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:e=>{let r="";e||(r="Jumlah tanggungan tidak boleh kosong"),a.data.job.dependents=e,a.setData("job",a.data.job),r?a.setError("job.dependents",r):a.clearErrors("job.dependents")},error:a.errors["job.dependents"]})}),o.jsx(l.Col,{span:{base:12,xs:6},children:o.jsx(d,{label:"Tempat Kerja",autoFocus:!0,radius:8,variant:"filled",value:a.data.job.workplace,placeholder:"Masukkan tempat kerja",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:e=>{const r=e.target.value;let s="";r||(s="Tempat kerja tidak boleh kosong"),a.data.job.workplace=r,a.setData("job",a.data.job),s?a.setError("job.workplace",s):a.clearErrors("job.workplace")},error:a.errors["job.workplace"]})}),o.jsx(l.Col,{span:{base:12,xs:6},children:o.jsx(d,{label:"Bidang Pekerjaan",autoFocus:!0,radius:8,value:a.data.job.field,variant:"filled",placeholder:"Masukkan bidang pekerjaan",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:e=>{const r=e.target.value;let s="";r||(s="Bidang pekerjaan tidak boleh kosong"),a.data.job.field=r,a.setData("job",a.data.job),s?a.setError("job.field",s):a.clearErrors("job.field")},error:a.errors["job.field"]})}),o.jsx(l.Col,{span:{base:12,xs:6},children:o.jsx(d,{label:"Skala Pekerjaan",autoFocus:!0,radius:8,variant:"filled",value:a.data.job.scale,placeholder:"Masukkan skala pekerjaan",styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:e=>{const r=e.target.value;let s="";r||(s="Skala pekerjaan tidak boleh kosong"),a.data.job.scale=r,a.setData("job",a.data.job),s?a.setError("job.scale",s):a.clearErrors("job.scale")},error:a.errors["job.scale"]})}),o.jsx(l.Col,{span:12,children:o.jsx(I,{label:"Deskripsi Pekerjaan",autoFocus:!0,autosize:!0,resize:"vertical",value:a.data.job.description,radius:8,variant:"filled",placeholder:"Masukkan deskripsi pekerjaan",styles:{input:{padding:"8px 20px",height:40},label:{marginBottom:8,color:"#495057"}},onChange:e=>{const r=e.target.value;let s="";r||(s="Deskripsi pekerjaan tidak boleh kosong"),a.data.job.description=r,a.setData("job",a.data.job),s?a.setError("job.description",s):a.clearErrors("job.description")},error:a.errors["job.description"]})})]})}),o.jsx(p,{legend:"Konsumsi",styles:{root:{padding:20,margin:0,backgroundColor:"#F8F9FA"}},children:o.jsxs(m,{gap:20,cols:{base:1,xs:2},children:[o.jsx(u,{hidePickedOptions:!0,label:"Harian",checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada konsumsi",searchable:!0,clearable:!0,defaultValue:a.data.consumptions.filter(e=>e.time_period==="Harian").map(({values:e})=>e)[0],variant:"filled",placeholder:"Pilih konsumsi",data:c.map(({name:e})=>e).filter(e=>!a.data.consumptions.some(r=>r.value===e)),styles:{input:{display:"flex",alignItems:"center",padding:"8px 20px"},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:e=>g(e,"Harian"),error:a.errors["consumptions.Harian"]}),o.jsx(u,{label:"Pekanan",defaultValue:a.data.consumptions.filter(e=>e.time_period==="Pekanan").map(({values:e})=>e)[0],hidePickedOptions:!0,checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada konsumsi",searchable:!0,clearable:!0,variant:"filled",placeholder:"Pilih konsumsi",data:c.map(({name:e})=>e).filter(e=>!a.data.consumptions.some(r=>r.value===e)),styles:{input:{display:"flex",alignItems:"center",padding:"8px 20px"},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:e=>g(e,"Pekanan"),error:a.errors["consumptions.Pekanan"]}),o.jsx(u,{label:"Bulanan",hidePickedOptions:!0,checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada konsumsi",searchable:!0,clearable:!0,defaultValue:a.data.consumptions.filter(e=>e.time_period==="Bulanan").map(({values:e})=>e)[0],variant:"filled",placeholder:"Pilih konsumsi",data:c.map(({name:e})=>e).filter(e=>!a.data.consumptions.some(r=>r.value===e)),styles:{input:{display:"flex",alignItems:"center",padding:"8px 20px"},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:e=>g(e,"Bulanan"),error:a.errors["consumptions.Bulanan"]}),o.jsx(u,{label:"Tahunan",hidePickedOptions:!0,checkIconPosition:"right",radius:8,defaultValue:a.data.consumptions.filter(e=>e.time_period==="Tahunan").map(({values:e})=>e)[0],nothingFoundMessage:"Tidak ada konsumsi",searchable:!0,clearable:!0,variant:"filled",placeholder:"Pilih konsumsi",data:c.map(({name:e})=>e).filter(e=>!a.data.consumptions.some(r=>r.value===e)),styles:{input:{display:"flex",alignItems:"center",padding:"8px 20px"},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:e=>g(e,"Tahunan"),error:a.errors["consumptions.Tahunan"]})]})}),o.jsx(p,{legend:"Ibadah",styles:{root:{padding:20,margin:0,backgroundColor:"#F8F9FA"}},children:o.jsx(l,{grow:!0,children:C.map(e=>o.jsx(l.Col,{span:{base:12,xs:6},children:o.jsx(b,{label:e.name,checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada opsi",searchable:!0,clearable:!0,defaultValue:a.data.prayers.find(({name:r})=>r===e.name).choice,variant:"filled",placeholder:"Pilih opsi",data:e.choices.map(({name:r})=>r),styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:r=>F(r,e.name),error:a.errors[`prayers.${e.id}`]})},e.id))})}),o.jsx(p,{legend:"Media Sosial",styles:{root:{padding:20,margin:0,backgroundColor:"#F8F9FA"}},children:o.jsx(u,{label:"Aplikasi",hidePickedOptions:!0,checkIconPosition:"right",radius:8,nothingFoundMessage:"Tidak ada aplikasi",searchable:!0,clearable:!0,defaultValue:a.data.social_medias,variant:"filled",placeholder:"Pilih aplikasi",data:y.map(({name:e})=>e),styles:{input:{display:"flex",alignItems:"center",padding:"8px 20px"},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:e=>{let r="";(!e||e.length===0)&&(r="Aplikasi tidak boleh kosong"),a.data.social_medias=e,a.setData("social_medias",a.data.social_medias),r?a.setError("social_medias",r):a.clearErrors("social_medias")},error:a.errors.social_medias})})]}),o.jsx(T,{justify:"flex-end",direction:{base:"column",xs:"row"},gap:8,children:o.jsx(D,{disabled:a.hasErrors,loading:a.processing,loaderProps:{type:"dots"},type:"submit",h:40,px:20,ius:8,leftSection:o.jsx(S,{}),rightSection:o.jsx(K,{children:"Enter"}),children:"Simpan"})})]})})};export{U as default};
