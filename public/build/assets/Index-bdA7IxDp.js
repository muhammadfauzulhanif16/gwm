import{r as S,j as e,y as n,h as M,n as A,G as R}from"./app-GN6kLJRO.js";import{o as z,c as B,S as d,A as f,M as r,i as y,F as G}from"./AppLayout-Gf3vqqpC.js";import{P as L,T as l}from"./PageHeader-OuuI5Bp2.js";import{T as s,I as H,a as E,D as F,b as _,c as K}from"./DataTable-GzvR40te.js";import{C as N,A as O,p as U,a as V,G as W,P as q}from"./GetChartColors-JEIviAnH.js";import{a as b,I as J}from"./IconTrash-WrNuQE2f.js";import{L as k}from"./List-pAa0s-MI.js";import{C as h}from"./Center-pRLDIHF5.js";import{T as v}from"./ThemeIcon-8WZSYl4b.js";import{S as Q}from"./Select-UtJL78W8.js";import"./AccordionChevron-gv5R7zeZ.js";import"./TextInput-v4RmyZAk.js";import"./MultiSelect-GIHIZ9yY.js";var X=z("list","IconList",[["path",{d:"M9 6l11 0",key:"svg-0"}],["path",{d:"M9 12l11 0",key:"svg-1"}],["path",{d:"M9 18l11 0",key:"svg-2"}],["path",{d:"M5 6l0 .01",key:"svg-3"}],["path",{d:"M5 12l0 .01",key:"svg-4"}],["path",{d:"M5 18l0 .01",key:"svg-5"}]]);N.register(O,U,V);const de=({title:p,description:C,meta:I,prayers:t,auth:c,citizens:o})=>{var m,x,u,j;const[i,w]=S.useState((m=t[0])==null?void 0:m.name),g=W((x=o.find(({name:a})=>a===i))==null?void 0:x.choices.length),P={labels:(u=o.find(({name:a})=>a===i))==null?void 0:u.choices.map(({name:a})=>a),datasets:[{label:"orang",data:(j=o.find(({name:a})=>a===i))==null?void 0:j.choices.map(({citizen_prayers_count:a})=>a),backgroundColor:g.map(a=>a[0]),borderColor:g.map(a=>a[1]),borderWidth:1}]};return e.jsx(B,{title:p,meta:I,auth:c,children:e.jsxs(d,{gap:40,children:[e.jsx(L,{title:p,description:C,actions:c.user&&e.jsxs(e.Fragment,{children:[e.jsx(f,{display:{base:"block",sm:"none"},size:40,onClick:()=>n.get(route("prayers.create")),children:e.jsx(b,{})}),e.jsx(M,{display:{base:"none",sm:"block"},h:40,px:20,leftSection:e.jsx(b,{}),onClick:()=>n.get(route("prayers.create")),children:"Tambah"})]})}),e.jsxs(s,{defaultValue:"table",styles:{tab:{padding:20},panel:{marginTop:20}},children:[e.jsxs(s.List,{grow:!0,children:[e.jsx(s.Tab,{value:"table",fw:500,fz:16,c:"gray.8",leftSection:e.jsx(H,{}),children:"Tabel"}),e.jsx(s.Tab,{value:"graphic",fw:500,fz:16,c:"gray.8",leftSection:e.jsx(E,{}),children:"Grafik"})]}),e.jsx(s.Panel,{value:"table",children:t.length?e.jsx(F,{data:t,columns:[{accessorKey:"name",header:"Nama"},{accessorKey:"created_at",header:"Dibuat Pada"},{accessorKey:"updated_at",header:"Diperbarui Pada"}],enableRowActions:c.user,renderRowActions:({row:a})=>e.jsxs(r,{position:"bottom-end",withArrow:!0,trigger:"click-hover",styles:{dropdown:{padding:8}},children:[e.jsx(r.Target,{children:e.jsx(f,{size:40,variant:"subtle",color:"gray.9",c:"gray.9",children:e.jsx(_,{})})}),e.jsxs(r.Dropdown,{children:[e.jsx(r.Item,{color:"yellow",leftSection:e.jsx(K,{}),onClick:()=>n.get(route("prayers.edit",a.original.id)),children:"Ubah"}),e.jsx(r.Item,{color:"red",leftSection:e.jsx(J,{}),onClick:()=>A.openConfirmModal({styles:{content:{padding:20},header:{padding:0,minHeight:0,backgroundColor:"transparent"},body:{padding:0}},title:e.jsxs(l,{fw:500,c:"gray.9",children:["Hapus ",a.original.name,"?"]}),centered:!0,withCloseButton:!1,labels:{confirm:"Hapus",cancel:"Batal"},onConfirm:()=>n.delete(route("prayers.destroy",a.original.id))}),children:"Hapus"})]})]}),renderDetailPanel:({row:a})=>e.jsxs(d,{gap:8,children:[e.jsxs(R,{gap:8,align:"center",children:[e.jsx(X,{size:24}),e.jsx(l,{fw:500,fz:14,children:"Daftar Opsi"})]}),e.jsx(k,{spacing:"xs",size:"sm",center:!0,type:"ordered",children:a.original.choices.map((T,D)=>e.jsx(k.Item,{children:T.name},D))})]})}):e.jsxs(h,{mih:"50vh",bg:"gray.0",style:{borderRadius:8,justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column",gap:20,color:"gray.0"},children:[e.jsx(v,{variant:"light",size:40,children:e.jsx(y,{})}),e.jsx(l,{fw:500,c:"gray.7",children:"Belum ada data ibadah"})]})}),e.jsx(s.Panel,{value:"graphic",children:o.length?e.jsxs(d,{gap:20,children:[e.jsx(G,{justify:"flex-end",children:e.jsx(Q,{w:{base:"100%",xs:"auto"},autoFocus:!0,checkIconPosition:"right",radius:8,allowDeselect:!1,value:i,variant:"filled",placeholder:"Pilih ibadah",data:t.map(({name:a})=>a),styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"},dropdown:{padding:8,borderRadius:8},option:{borderRadius:8}},onChange:a=>w(a)})}),e.jsx(h,{mih:"100vh",children:e.jsx(q,{data:P})})]}):e.jsxs(h,{p:20,h:"50vh",bg:"gray.0",style:{borderRadius:8,justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column",gap:20,color:"gray.0"},children:[e.jsx(v,{variant:"light",size:40,children:e.jsx(y,{})}),e.jsx(l,{fw:500,c:"gray.7",align:"center",children:"Belum ada data ibadah yang dilakukan oleh warga"})]})})]})]})})};export{de as default};
