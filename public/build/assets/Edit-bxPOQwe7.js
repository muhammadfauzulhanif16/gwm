import{W as v,j as a,B as d,G as y,h as m}from"./app-GN6kLJRO.js";import{c as k,S as E,A as C,F as D}from"./AppLayout-Gf3vqqpC.js";import{P as I,T as S}from"./PageHeader-OuuI5Bp2.js";import{T as h}from"./TextInput-v4RmyZAk.js";import{I as $,a as w}from"./IconTrash-WrNuQE2f.js";import{I as T}from"./IconCornerDownLeft-2Qks2vrS.js";import{K as N}from"./Kbd-Cj2wMUF5.js";const L=({title:l,description:p,prayers:u,prayer:n,auth:x})=>{const e=v({name:n.name||"",choices:n.choices||[{id:"",name:""}]}),f=()=>{e.setData("choices",[...e.data.choices,{name:""}])},g=o=>{e.setData("choices",e.data.choices.filter((s,r)=>r!==o))};return a.jsx(k,{title:l,auth:x,children:a.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:40},onSubmit:o=>{o.preventDefault(),e.put(route("prayers.update",n.id))},children:[a.jsx(I,{title:l,description:p}),a.jsxs(d,{bg:"gray.0",p:20,style:{borderRadius:8},children:[a.jsx(h,{mb:20,label:"Nama",autoFocus:!0,radius:8,variant:"filled",placeholder:"Masukkan nama ibadah",value:e.data.name,styles:{input:{padding:20,height:40},label:{marginBottom:8,color:"#495057"}},onChange:o=>{const s=o.target.value;let r="";s?u.some(t=>new RegExp(`^${s}$`,"i").test(t.name))&&(r="Nama ibadah sudah ada"):r="Nama ibadah tidak boleh kosong",e.data.name=s,e.setData("name",s),r?e.setError("name",r):e.clearErrors("name")},error:e.errors.name}),a.jsxs(d,{children:[a.jsx(S,{c:"gray.7",fz:14,mb:8,fw:500,children:"Opsi"}),a.jsx(E,{gap:12,children:e.data.choices.map((o,s)=>{var r,t;return a.jsxs(y,{gap:8,children:[a.jsx(h,{autoFocus:!0,radius:8,variant:"filled",placeholder:`Masukkan opsi (${s+1})`,styles:{input:{padding:20,height:40}},style:{flexGrow:1},onChange:j=>{const c=j.target.value;let i="";c?e.data.choices.some(b=>new RegExp(`^${c}$`,"i").test(b.name))&&(i="Nama opsi sudah ada"):i="Nama opsi tidak boleh kosong",e.data.choices[s].name=c,e.setData("choices",e.data.choices),i?e.setError(`choices.${s}.name`,i):e.clearErrors(`choices.${s}.name`)},value:o.name,error:(t=(r=e.errors.choices)==null?void 0:r[s])==null?void 0:t.name}),a.jsx(C,{size:40,variant:"light",color:"red",onClick:()=>g(s),disabled:e.data.choices.length===1,children:a.jsx($,{})})]},s)})})]})]}),a.jsxs(D,{justify:"flex-end",direction:{base:"column",xs:"row"},gap:8,children:[a.jsx(m,{h:40,px:20,variant:"outline",leftSection:a.jsx(w,{}),onClick:f,disabled:e.processing,children:"Tambah Opsi Lainnya"}),a.jsx(m,{disabled:e.hasErrors||!e.data.name||e.data.choices.some(o=>!o.name),loading:e.processing,loaderProps:{type:"dots"},type:"submit",h:40,px:20,radius:8,leftSection:a.jsx(T,{}),rightSection:a.jsx(N,{children:"Enter"}),children:"Simpan"})]})]})})};export{L as default};
