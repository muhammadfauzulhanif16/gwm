import{W as h,j as o,B as f,G as g,h as m}from"./app-GN6kLJRO.js";import{c as j,S as b,A as y,F as k}from"./AppLayout-Gf3vqqpC.js";import{P as v,T as C}from"./PageHeader-OuuI5Bp2.js";import{T as E}from"./TextInput-v4RmyZAk.js";import{I,a as S}from"./IconTrash-WrNuQE2f.js";import{I as D}from"./IconCornerDownLeft-2Qks2vrS.js";import{K as T}from"./Kbd-Cj2wMUF5.js";const K=({title:i,description:c,consumptions:p,auth:l})=>{const s=h({consumptions:[{name:""}]}),u=()=>{s.setData("consumptions",[...s.data.consumptions,{name:""}])},d=a=>{s.setData("consumptions",s.data.consumptions.filter((n,t)=>t!==a))};return o.jsx(j,{title:i,auth:l,children:o.jsxs("form",{style:{display:"flex",flexDirection:"column",gap:40},onSubmit:a=>{a.preventDefault(),s.post(route("consumptions.store"))},children:[o.jsx(v,{title:i,description:c}),o.jsxs(f,{bg:"gray.0",p:20,style:{borderRadius:8},children:[o.jsx(C,{c:"gray.7",fz:14,mb:8,fw:500,children:"Nama"}),o.jsx(b,{gap:12,children:s.data.consumptions.map((a,n)=>o.jsxs(g,{gap:8,mb:s.hasErrors&&20,children:[o.jsx(E,{autoFocus:!0,radius:8,variant:"filled",placeholder:`Masukkan konsumsi (${n+1})`,styles:{input:{padding:20,height:40}},style:{flexGrow:1},onChange:t=>{const r=t.target.value;let e="";r?p.some(x=>new RegExp(`^${r}$`,"i").test(x.name))&&(e="Nama konsumsi sudah ada"):e="Nama konsumsi tidak boleh kosong",s.data.consumptions[n].name=r,s.setData("consumptions",s.data.consumptions),e?s.setError(`consumptions.${n}.name`,e):s.clearErrors(`consumptions.${n}.name`)},error:s.errors[`consumptions.${n}.name`]}),o.jsx(y,{size:40,variant:"light",color:"red",onClick:()=>d(n),disabled:s.data.consumptions.length===1,children:o.jsx(I,{})})]},n))})]}),o.jsxs(k,{justify:"flex-end",direction:{base:"column",xs:"row"},gap:8,children:[o.jsx(m,{h:40,px:20,variant:"outline",leftSection:o.jsx(S,{}),onClick:u,disabled:s.processing,children:"Tambah Konsumsi Lainnya"}),o.jsx(m,{disabled:s.hasErrors||s.data.consumptions.some(a=>!a.name),loading:s.processing,loaderProps:{type:"dots"},type:"submit",h:40,px:20,leftSection:o.jsx(D,{}),rightSection:o.jsx(T,{children:"Enter"}),children:"Simpan"})]})]})})};export{K as default};
